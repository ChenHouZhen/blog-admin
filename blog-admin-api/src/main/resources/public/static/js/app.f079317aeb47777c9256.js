webpackJsonp([1],{MPxJ:function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-footer",{staticStyle:{height:"45px"}},[t("span",[t("strong",[this._v("Copyright")]),this._v("  @2019-2020 "),t("strong",[this._v(" by JK")])])])},staticRenderFns:[]};var s={name:"App",components:{Footers:o("VU/8")({name:"footers"},a,!1,function(e){o("z74V")},null,null).exports}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=o("VU/8")(s,n,!1,function(e){o("Uj7K")},null,null).exports,l=o("/ocq"),d={name:"Button",data:function(){return{menuData:[],msg:"按钮",navList:[1,2,3,4,5],tableLoading:!1,tableTotal:-1,currentPage:1}},methods:{get:function(){var e=this;e.tableLoading=!0,this.$axios.get("/api/config/sysmenu").then(function(t){console.log("res",t),t&&200==t.status&&(e.tableLoading=!1,e.menuData=t.data)})},refresh:function(){this.menuData=[]},selectNav:function(e){console.log("e",e);var t=e.target;console.log(t);var o=t.getAttribute("data-index");console.log("index:"+o),this.$message("index: "+o+"  value: ")},handleEdit:function(e,t){console.log("正在编辑"),console.log("index: "+e+" row: ",t)},handleDelete:function(e,t){console.log("正在删除"),console.log("index: "+e+" row: ",t)}}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-button",{attrs:{type:"primary"},on:{click:e.get}},[e._v("获取表格")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.refresh}},[e._v("刷新表格")]),e._v(" "),e._m(0),e._v(" "),o("div",[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.menuData,"max-height":"250","row-key":"path","tree-props":{children:"children"}}},[e._v(">\n            "),e._v(" "),o("el-table-column",{attrs:{prop:"id",label:"ID",width:"180px"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"path",label:"路径",width:"180px"}}),e._v(" "),o("el-table-column",{attrs:{prop:"iconCls",label:"图标",width:"180px"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),o("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.tableTotal,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),e._v(" "),o("ul",{staticClass:"nav",on:{click:e.selectNav}},e._l(e.navList,function(t,r){return o("li",{key:r,attrs:{"data-index":r}},[e._v(e._s(t))])}),0)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"button",attrs:{id:"self",type:"button"}},[t("span",[this._v("自定义按钮")])])}]};var c=o("VU/8")(d,u,!1,function(e){o("MPxJ")},null,null).exports,m={data:function(){return{form:{username:"admin",password:"123",isRemenber:!1},loading:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{login:function(e){var t=this,o=this;o.loading=!0,this.$refs[e].validate(function(e){console.log("正在登陆 username："+t.form.username+" password:"+t.form.password),e?(console.log("验证成功"),t.postRequest("/login",{username:t.form.username,password:t.form.password}).then(function(e){o.loading=!1,console.log("resp ==> ",e)})):console.log("验证失败")})}}},p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{model:e.form,rules:e.rules}},[o("h3",[e._v("系统登录")]),e._v(" "),o("el-form-item",{staticClass:"input",attrs:{prop:"username"}},[o("el-input",{attrs:{placeholder:"账号"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),o("el-form-item",{staticClass:"input",attrs:{prop:"password"}},[o("el-input",{attrs:{placeholder:"密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),o("el-form-item",[o("el-checkbox",{model:{value:e.form.isRemenber,callback:function(t){e.$set(e.form,"isRemenber",t)},expression:"form.isRemenber"}},[e._v("记住密码")])],1),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"login_button",attrs:{type:"primary"},on:{click:function(t){return e.login("form")}}},[e._v("登录")])],1)],1)},staticRenderFns:[]};var f=o("VU/8")(m,p,!1,function(e){o("zuCT")},null,null).exports,_={data:function(){return{username:"系统管理员"}},methods:{handleCommand:function(e){console.log("点击下拉："+e)}},computed:{routes:function(){return console.log("router：",this.$router.options.routes),this.$router.options.routes}}},h={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-container",{staticClass:"home-container"},[o("el-header",{staticClass:"home-header"},[o("span",[e._v("机器人")]),e._v(" "),o("div",{staticClass:"home-header-info"},[o("i",{staticClass:"el-icon-chat-dot-round",staticStyle:{"margin-right":"20px","font-size":"24px"}}),e._v(" "),o("el-dropdown",{on:{command:e.handleCommand}},[o("div",{staticStyle:{display:"flex","align-items":"center",cursor:"pointer"}},[o("span",[e._v(e._s(e.username))]),e._v(" "),o("i",[o("img",{staticStyle:{width:"40px",height:"40px","border-radius":"40px"},attrs:{src:"http://bpic.588ku.com/element_pic/01/40/00/64573ce2edc0728.jpg"}})])]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"user"}},[e._v("个人中心")]),e._v(" "),o("el-dropdown-item",{attrs:{command:"setting"}},[e._v("设置")]),e._v(" "),o("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e._v("注销")])],1)],1)],1)]),e._v(" "),o("el-container",[o("el-aside",{staticClass:"home-aside",staticStyle:{display:"flex","justify-content":"flex-start",width:"180px","text-align":"left"}},[o("el-menu",{staticStyle:{width:"180px"},attrs:{"unique-opened":"",router:""}},[e._l(this.routes,function(t,r){return[t.children&&0!=t.children.length?o("el-submenu",{key:r+"",attrs:{index:r+""}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.meta.title))])]),e._v(" "),e._l(t.children,function(t){return o("el-menu-item",{key:t.path,staticStyle:{"padding-left":"35px"},attrs:{width:"180px",index:t.path}},[o("span",[e._v(e._s(t.meta.title))])])})],2):e._e()]})],2)],1),e._v(" "),o("el-main",[o("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),o("el-breadcrumb-item",{domProps:{textContent:e._s(this.$router.currentRoute.meta.title)}})],1),e._v(" "),o("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var v=o("VU/8")(_,h,!1,function(e){o("x/CT")},null,null).exports,g={data:function(){return{info:{},addForm:{deptName:"",orderNum:"1",pDeptId:""},editForm:{id:"",deptName:"",orderNum:1},treeLoading:!1,infoLoading:!1,filterText:"",data:[],isNext:!1,parentNode:{},infoFormVisible:!1,addFormVisible:!1,editFormVisible:!1,defaultProps:{children:"children",label:"name",key:"id"}}},watch:{filterText:function(e,t){console.log("监听到 filterType 参数变化，新值为："+e+"  旧值为："+t),this.$refs.tree.filter(e)}},methods:{queryDeptTree:function(){var e=this;this.$axios.get("/api/v1/dept/tree").then(function(t){console.log("response",t),t&&200==t.status&&200==t.data.code?(e.data=t.data.data,console.log("this",this),console.log("_this",e)):e.$message.error("获取数据失败！"),e.treeLoading=!1}).catch(function(t){e.$message.error("获取数据失败！"),console.log(t),e.treeLoading=!1})},handleNodeClick:function(e){this.infoFormVisible=!0,this.infoLoading=!0,this.queryDeptInfo(e.id)},queryDeptInfo:function(e){console.log("查询部门信息，id:"+e);var t=this;this.$axios.get("/api/v1/dept/"+e).then(function(e){console.log("查询部门信息，响应：",e),e&&200==e.status&&200==e.data.code?t.info=e.data.data:t.$message.error("查询信息失败 "),t.infoLoading=!1}).catch(function(e){t.infoLoading=!1})},showAddForm:function(e,t,o){console.log(">>>>> node",e),console.log("next:"+o),this.isNext=o,o?(console.log("新增下级"),this.addForm.pDeptId=e.key):(console.log("新增同级"),console.log("node.parent:",e.parent),this.addForm.pDeptId=e.parent?e.parent.key:0,this.parentNode=e.parent?e.parent:e),this.addFormVisible=!0},showEditForm:function(e,t){this.editFormVisible=!0,console.log("data",t),this.editForm.id=t.id,this.editForm.deptName=t.name,this.editForm.orderNum=1},openDeleteForm:function(e){var t=this;console.log("删除，id: "+e.key),this.$confirm("是否删除","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.remove(e.key)}).catch(function(){console.log("取消删除")})},cleanAddForm:function(){this.addForm.deptName="",this.addForm.orderNum="1",this.addForm.pDeptId=""},edit:function(){var e=this;console.log("编辑"),this.editFormVisible=!1;var t=this,o={deptName:this.editForm.deptName,orderNum:this.editForm.orderNum};this.$axios.put("/api/v1/dept/"+this.editForm.id,o).then(function(o){console.log("edit response",o),o&&200==o.status&&200==o.data.code?(console.log("编辑成功"),e.$refs.tree.getNode(e.editForm.id).data.name=o.data.data.name,e.cleanAddForm()):t.$message.error("编辑部门失败"),e.editFormVisible=!1})},append:function(){var e=this,t=this;console.log(">>>>> 新增"),console.log(">>>>> form",this.addForm);var o={deptName:this.addForm.deptName,orderNum:this.addForm.orderNum,pid:this.addForm.pDeptId};this.$axios.post("/api/v1/dept",o).then(function(o){if(console.log("res",o),o&&200==o.status&&200==o.data.code){var r={id:o.data.data.deptId,name:o.data.data.name,children:[]};if(console.log("node",e.$refs.tree.getNode(e.addForm.pDeptId)),e.isNext)t.$refs.tree.getNode(e.addForm.pDeptId).data.children.push(r),t.$refs.tree.getNode(e.addForm.pDeptId).expanded=!0;else{console.log("nohe11",t.$refs.tree.getNode(e.addForm.pDeptId)),console.log("parentNode :",t.parentNode);var a=t.parentNode;console.log("parent222",a),a&&(console.log("222222"),a.data instanceof Array?a.data.push(r):a.data.children.push(r))}}else t.$message.error("新增数据失败！"+o.data.msg);e.cleanAddForm()}).catch(function(e){t.$message.error("新增数据失败！"),console.log(e)}),this.addFormVisible=!1},remove:function(e){var t=this;console.log(">>>>> 正在删除,id:"+e),this.$axios.delete("/api/v1/dept/"+e).then(function(o){if(console.log("delete res",o),o&&200==o.status&&200==o.data.code){console.log("delete success"),console.log("node",t.$refs.tree.getNode(e));var r=t.$refs.tree.getNode(e).parent,a=r.data.children||r.data,s=a.findIndex(function(t){return t.id===e});a.splice(s,1)}else t.$message.error("删除数据失败!")})},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},renderContent:function(e,t){var o=this,r=t.node,a=t.data;t.store;return e("div",{class:"custom-tree-node"},[e("span",[r.label]),e("span",[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){o.showEditForm(r,a)}}},["Edit"]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){o.showAddForm(r,a,!1)}}},["Insert"]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){o.showAddForm(r,a,!0)}}},["Append"]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return o.openDeleteForm(r)}}},["Delete"])])])}},mounted:function(){this.treeLoading=!0,this.queryDeptTree()}},b={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"padding-top":"20px",display:"flex"}},[o("div",{staticClass:"custom-frame"},[o("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),o("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"tree",attrs:{data:e.data,"node-key":"id","expand-on-click-node":!1,"render-content":e.renderContent,props:e.defaultProps,"filter-node-method":e.filterNode,"highlight-current":""},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),e.infoFormVisible?o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.infoLoading,expression:"infoLoading"}],staticClass:"custom-detail"},[o("el-card",[o("div",{attrs:{slot:"header"},slot:"header"},[o("span",[e._v("部门详情")])]),e._v(" "),o("el-form",{attrs:{model:e.info}},[o("el-form-item",{attrs:{label:"部门ID"}},[o("span",[e._v(e._s(e.info.deptId))])]),e._v(" "),o("el-form-item",{attrs:{label:"部门名称"}},[o("span",[e._v(e._s(e.info.name))])]),e._v(" "),o("el-form-item",{attrs:{label:"父级部门ID"}},[o("span",[e._v(e._s(e.info.parentId))])]),e._v(" "),o("el-form-item",{attrs:{label:"排序号"}},[o("span",[e._v(e._s(e.info.orderNum))])]),e._v(" "),o("el-form-item",{attrs:{label:"创建时间"}},[o("span",[e._v(e._s(e.info.createTime))])])],1)],1)],1):e._e(),e._v(" "),o("el-dialog",{attrs:{title:"新增部门",visible:e.addFormVisible,width:"25%",top:"16vh","hide-required-asterisk":"true"},on:{"update:visible":function(t){e.addFormVisible=t}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.append()}}},[o("el-form",{attrs:{model:e.addForm,size:"medium","label-width":"90px"}},[o("el-form-item",{attrs:{label:"上级部门ID"}},[o("el-input",{attrs:{disabled:!0,placeholder:""},model:{value:e.addForm.pDeptId,callback:function(t){e.$set(e.addForm,"pDeptId",t)},expression:"addForm.pDeptId"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"部门名",required:""}},[o("el-input",{attrs:{placeholder:""},model:{value:e.addForm.deptName,callback:function(t){e.$set(e.addForm,"deptName",t)},expression:"addForm.deptName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"排序"}},[o("el-input",{attrs:{placeholder:""},model:{value:e.addForm.orderNum,callback:function(t){e.$set(e.addForm,"orderNum",t)},expression:"addForm.orderNum"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.addFormVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.append()}}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"编辑部门",visible:e.editFormVisible,width:"25%",top:"16vh","hide-required-asterisk":"true"},on:{"update:visible":function(t){e.editFormVisible=t}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.edit()}}},[o("el-form",{attrs:{model:e.editForm,size:"medium","label-width":"90px"}},[o("el-form-item",{attrs:{label:"部门名",required:""}},[o("el-input",{model:{value:e.editForm.deptName,callback:function(t){e.$set(e.editForm,"deptName",t)},expression:"editForm.deptName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"排序"}},[o("el-input",{model:{value:e.editForm.orderNum,callback:function(t){e.$set(e.editForm,"orderNum",t)},expression:"editForm.orderNum"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.edit()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var y=o("VU/8")(g,b,!1,function(e){o("Ts0X")},null,null).exports,w=o("bOdI"),x=o.n(w),k={data:function(){return{treeLoading:!1,data:[],pickDept:{id:"",name:""},defaultProps:{children:"children",label:"name",key:"id"}}},props:{showTree:Boolean},methods:{queryDeptTree:function(){var e=this;this.$axios.get("/api/v1/dept/tree").then(function(t){console.log("response",t),t&&200==t.status&&200==t.data.code?e.data=t.data.data:e.$message.error("获取数据失败！"),e.treeLoading=!1}).catch(function(t){e.$message.error("获取数据失败！"),e.treeLoading=!1})},handleCheckChange:function(e,t,o){console.log(e,t,o),t?(this.pickDept.id=e.id,this.pickDept.name=e.name,this.$refs.tree.setCheckedKeys([e.id]),this.$emit("childEvent",{id:e.id,name:e.name})):e.id==this.pickDept.id&&(this.pickDept.id="",this.pickDept.name="",this.$refs.tree.setCheckedKeys([]),this.$emit("childEvent",{id:"",name:""}))}},mounted:function(){this.treeLoading=!0,this.queryDeptTree()}},F={render:function(){var e=this.$createElement,t=this._self._c||e;return this.showTree?t("div",{staticClass:"custom_tree"},[t("el-card",[t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:this.treeLoading,expression:"treeLoading"}],ref:"tree",attrs:{data:this.data,"show-checkbox":"","node-key":"id",props:this.defaultProps,"default-expand-all":"","check-strictly":""},on:{"check-change":this.handleCheckChange}})],1)],1):this._e()},staticRenderFns:[]};var $=o("VU/8")(k,F,!1,function(e){o("OYKP")},null,null).exports,N={data:function(){return{operation:!0,table_loading:!1,add_user_loading:!1,edit_user_loading:!1,forbid_user_loading:!1,show_avatar:"",newOpenForbidRow:null,is_show_avatar:!1,is_show_add_user_form:!1,is_show_dept_tree:!1,is_show_edit_user_form:!1,table_data:[],query_form:{user_name:"",start_time:"",end_time:"",status:"1",phone:"",deptId:"",page:{current_page:1,page_size:10,total_size:1}},user_form:{userId:"",username:"",password:"123456",phone:"",email:"",avatar:"https://hqjy-coursetest.oss-cn-shenzhen.aliyuncs.com/knowledge_base/image/portrait/20190107/3e2cfd43981f4cb1b7b38a494aea7f36.jpg",deptId:"",deptName:""}}},methods:{openComfirmForbid:function(e){this.newOpenForbidRow&&(console.log("存在..."),this.newOpenForbidRow.visible=!1),e.visible=!0,this.newOpenForbidRow=e},closeComfirmForbid:function(e){e.visible=!1,this.newOpenForbidRow=null},resertAddUserForm:function(){console.log("重置用户新增框..."),this.$refs.addUserForm.resetFields()},getTreeNode:function(e){var t=e.id,o=e.name;console.log("id:"+t+" name:"+o),this.user_form.deptId=t,this.user_form.deptName=o},inputFocus:function(){console.log("this.is_show_dept_tree：",this.is_show_dept_tree),this.is_show_dept_tree=!0},queryTable:function(){var e=this;this.table_loading=!0;var t={userName:this.query_form.user_name,deptId:this.query_form.deptId,phone:this.query_form.phone,startTime:this.query_form.start_time,endTime:this.query_form.end_time,page:this.query_form.page.current_page,limit:this.query_form.page.page_size,status:this.query_form.status};0==this.query_form.status?this.operation=!1:this.operation=!0,this.$axios.get("/api/v1/users",{params:t}).then(function(t){console.log("查询列表：",t),t&&200==t.status&&200==t.data.code&&(console.log("Query table data success"),e.table_data=t.data.data.records,e.query_form.page.total_size=parseInt(t.data.data.total),e.table_data.forEach(function(t){return[e.$set(t,"visible",!1)]}),console.log("data",e.table_data)),e.table_loading=!1}).catch(function(t){e.table_loading=!1})},add_user:function(){var e;this.add_user_loading=!0;var t=this,o=(e={username:this.user_form.username,deptId:this.user_form.deptId,mobile:this.user_form.phone,email:this.user_form.email,password:this.user_form.password},x()(e,"deptId",this.user_form.deptId),x()(e,"avatar",this.user_form.avatar),e);this.$axios.post("/api/v1/users",o).then(function(e){console.log("新增用户响应：",e),e&&200==e.status&&200==e.data.code&&(console.log("新增用户成功..."),t.is_show_add_user_form=!1,t.resertAddUserForm(),t.queryTable()),t.add_user_loading=!1}).catch(function(e){console.log("新增用户失败..."),t.add_user_loading=!1})},openEditUserForm:function(e){var t=this;this.is_show_edit_user_form=!0;this.user_form.userId=e.userId,this.$axios("/api/v1/users/"+e.userId).then(function(e){if(e&&200==e.status&&200==e.data.code){var o=e.data.data;o&&(t.user_form.phone=o.mobile,t.user_form.email=o.email,t.user_form.username=o.username,t.user_form.password=o.password,t.user_form.deptId=o.deptId)}})},edit_user:function(e){var t;this.edit_user_loading=!0;var o=this,r=(t={username:this.user_form.username,deptId:this.user_form.deptId,mobile:this.user_form.phone,email:this.user_form.email,password:this.user_form.password},x()(t,"deptId",this.user_form.deptId),x()(t,"avatar",this.user_form.avatar),t);this.$axios.put("/api/v1/users/"+this.user_form.userId,r).then(function(e){console.log("编辑用户响应：",e),e&&200==e.status&&200==e.data.code&&(console.log("编辑用户成功..."),o.is_show_edit_user_form=!1,o.queryTable()),o.edit_user_loading=!1}).catch(function(e){console.log("编辑用户失败..."),o.edit_user_loading=!1})},handleForbid:function(e){this.forbid_user_loading=!0,console.log("禁用用户...");var t=this;this.closeComfirmForbid(e),this.$axios.delete("/api/v1/users/"+e.userId).then(function(e){t.forbid_user_loading=!1,t.queryTable()}).catch(function(e){t.forbid_user_loading=!1})},cancel_add_user:function(){this.is_show_add_user_form=!1,this.resertAddUserForm()},view_avatar:function(e){console.log("查看头像：src："+e),e?(this.show_avatar=e,this.is_show_avatar=!0):this.$message.error("无法查看")},close_avatar_img:function(){this.is_show_avatar=!1},handleCurrentChange:function(e){console.log("当前页: "+e),this.query_form.page.current_page=e,this.queryTable()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.query_form.page.page_size=e,this.query_form.page.current_page=1,this.queryTable()},resetQueryForm:function(){this.query_form.user_name="",this.query_form.start_time="",this.query_form.end_time="",this.query_form.phone="",this.query_form.deptId="",this.query_form.status="1",this.queryTable()},showAddUserForm:function(){this.is_show_add_user_form=!0}},mounted:function(){this.table_loading=!0,this.queryTable()},components:{SysDeptTree:$}},q={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{"margin-top":"20px"}},[o("el-card",[o("el-form",{staticStyle:{width:"100%"},attrs:{model:e.query_form,inline:!0}},[o("div",[o("el-form-item",{attrs:{label:"用户名"}},[o("el-input",{model:{value:e.query_form.user_name,callback:function(t){e.$set(e.query_form,"user_name",t)},expression:"query_form.user_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"手机号"}},[o("el-input",{model:{value:e.query_form.phone,callback:function(t){e.$set(e.query_form,"phone",t)},expression:"query_form.phone"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"开始时间"}},[o("el-date-picker",{attrs:{placeholder:"请选择时间",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.query_form.start_time,callback:function(t){e.$set(e.query_form,"start_time",t)},expression:"query_form.start_time"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"结束时间"}},[o("el-date-picker",{attrs:{placeholder:"请选择时间",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd 23:59:59"},model:{value:e.query_form.end_time,callback:function(t){e.$set(e.query_form,"end_time",t)},expression:"query_form.end_time"}})],1),e._v(" "),o("el-form-item",{attrs:{label:""}},[o("el-switch",{attrs:{"active-text":"正常","inactive-text":"禁用","active-value":"1","inactive-value":"0","inactive-color":"#ff4949"},model:{value:e.query_form.status,callback:function(t){e.$set(e.query_form,"status",t)},expression:"query_form.status"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.queryTable}},[e._v("查询")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.resetQueryForm}},[e._v("重置")])],1)],1)])],1),e._v(" "),o("el-card",{staticStyle:{"margin-top":"10px"}},[o("div",{staticStyle:{display:"flex"}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.showAddUserForm}},[e._v("新增")])],1),e._v(" "),o("el-divider"),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.table_loading,expression:"table_loading"}],staticStyle:{width:"100%"},attrs:{data:e.table_data}},[o("el-table-column",{attrs:{prop:"userId",label:"用户ID"}}),e._v(" "),o("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),o("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deptName",label:"部门"}}),e._v(" "),o("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),o("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("i",{staticStyle:{cursor:"pointer"},on:{click:function(o){return e.view_avatar(t.row.avatar)}}},[o("el-avatar",{attrs:{size:"small",src:t.row.avatar,shape:"circle"}})],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return e.operation?[o("el-button",{attrs:{icon:"el-icon-edit",size:"mini"},on:{click:function(o){return e.openEditUserForm(t.row)}}},[e._v("编辑")]),e._v(" "),o("el-popover",{ref:"popover{{$index}}",attrs:{width:"160"},model:{value:t.row.visible,callback:function(o){e.$set(t.row,"visible",o)},expression:"scope.row.visible"}},[o("p",[e._v("确定禁用吗？")]),e._v(" "),o("div",{staticStyle:{"text-align":"right",margin:"0"}},[o("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(o){return e.closeComfirmForbid(t.row)}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.handleForbid(t.row)}}},[e._v("确定")])],1)]),e._v(" "),o("el-button",{directives:[{name:"popover",rawName:"v-popover:popover{{$index}",arg:"popover{{$index}"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete",loading:e.forbid_user_loading},on:{click:function(o){return e.openComfirmForbid(t.row)}}},[e._v("禁用")])]:void 0}}],null,!0)})],1),e._v(" "),o("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next","current-page":e.query_form.page.current_page,total:e.query_form.page.total_size,"page-sizes":[5,10,50,100]},on:{"update:currentPage":function(t){return e.$set(e.query_form.page,"current_page",t)},"update:current-page":function(t){return e.$set(e.query_form.page,"current_page",t)},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),e._v(" "),e.is_show_avatar?o("div",{staticClass:"custom_avatar_view"},[o("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",staticStyle:{top:"100px",right:"120px"}},[o("i",{staticClass:"el-icon-circle-close",on:{click:e.close_avatar_img}})]),e._v(" "),o("div",{staticClass:"custom_avatar_view_image"},[o("img",{attrs:{src:e.show_avatar}})])]):e._e(),e._v(" "),o("el-dialog",{attrs:{title:"新增用户",visible:e.is_show_add_user_form,width:"30%"},on:{"update:visible":function(t){e.is_show_add_user_form=t}}},[o("el-form",{ref:"addUserForm",attrs:{model:e.user_form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"用户名",prop:"username"}},[o("el-input",{model:{value:e.user_form.username,callback:function(t){e.$set(e.user_form,"username",t)},expression:"user_form.username"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[o("el-input",{model:{value:e.user_form.phone,callback:function(t){e.$set(e.user_form,"phone",t)},expression:"user_form.phone"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[o("el-input",{model:{value:e.user_form.email,callback:function(t){e.$set(e.user_form,"email",t)},expression:"user_form.email"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{attrs:{"show-password":""},model:{value:e.user_form.password,callback:function(t){e.$set(e.user_form,"password",t)},expression:"user_form.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"部门",prop:"deptName"}},[o("el-row",{attrs:{type:"flex",gutter:6}},[o("el-col",{attrs:{span:6}},[o("el-input",{attrs:{readonly:""},on:{focus:e.inputFocus},model:{value:e.user_form.deptId,callback:function(t){e.$set(e.user_form,"deptId",t)},expression:"user_form.deptId"}})],1),e._v(" "),o("el-col",{attrs:{span:14}},[o("el-input",{attrs:{readonly:""},on:{focus:e.inputFocus},model:{value:e.user_form.deptName,callback:function(t){e.$set(e.user_form,"deptName",t)},expression:"user_form.deptName"}})],1),e._v(" "),o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.is_show_dept_tree=!1}}},[e._v("关闭")])],1)],1),e._v(" "),o("SysDeptTree",{attrs:{"show-tree":e.is_show_dept_tree},on:{childEvent:e.getTreeNode}})],1),e._v(" "),o("el-form-item",{staticStyle:{display:"flex","justify-content":"flex-end"}},[o("el-button",{attrs:{type:"primary",loading:e.add_user_loading},on:{click:e.add_user}},[e._v("提交")]),e._v(" "),o("el-button",{on:{click:e.cancel_add_user}},[e._v("取消")])],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"编辑用户",visible:e.is_show_edit_user_form,width:"30%"},on:{"update:visible":function(t){e.is_show_edit_user_form=t}}},[o("el-form",{ref:"addUserForm",attrs:{model:e.user_form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"用户名",prop:"username"}},[o("el-input",{model:{value:e.user_form.username,callback:function(t){e.$set(e.user_form,"username",t)},expression:"user_form.username"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[o("el-input",{model:{value:e.user_form.phone,callback:function(t){e.$set(e.user_form,"phone",t)},expression:"user_form.phone"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[o("el-input",{model:{value:e.user_form.email,callback:function(t){e.$set(e.user_form,"email",t)},expression:"user_form.email"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{attrs:{"show-password":""},model:{value:e.user_form.password,callback:function(t){e.$set(e.user_form,"password",t)},expression:"user_form.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"部门",prop:"deptName"}},[o("el-row",{attrs:{type:"flex",gutter:6}},[o("el-col",{attrs:{span:6}},[o("el-input",{attrs:{readonly:""},on:{focus:e.inputFocus},model:{value:e.user_form.deptId,callback:function(t){e.$set(e.user_form,"deptId",t)},expression:"user_form.deptId"}})],1),e._v(" "),o("el-col",{attrs:{span:14}},[o("el-input",{attrs:{readonly:""},on:{focus:e.inputFocus},model:{value:e.user_form.deptName,callback:function(t){e.$set(e.user_form,"deptName",t)},expression:"user_form.deptName"}})],1),e._v(" "),o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.is_show_dept_tree=!1}}},[e._v("关闭")])],1)],1),e._v(" "),o("SysDeptTree",{attrs:{"show-tree":e.is_show_dept_tree},on:{childEvent:e.getTreeNode}})],1),e._v(" "),o("el-form-item",{staticStyle:{display:"flex","justify-content":"flex-end"}},[o("el-button",{attrs:{type:"primary",loading:e.edit_user_loading},on:{click:e.edit_user}},[e._v("提交")]),e._v(" "),o("el-button",{on:{click:function(t){e.is_show_edit_user_form=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var I=o("VU/8")(N,q,!1,function(e){o("l/xz")},null,null).exports;r.default.use(l.a);var C=new l.a({routes:[{path:"/login",name:"Login",component:f},{path:"/",name:"Home",component:v,meta:{title:"系统管理"},children:[{path:"/button",name:"Button",component:c,meta:{title:"按钮管理"}},{path:"/sys/dept",name:"SysDept",component:y,meta:{title:"部门管理"},children:[{path:"/tree",name:"SysDeptTree",component:$,meta:{title:"部门树"}}]},{path:"/sys/user",name:"SysUser",component:I,meta:{title:"用户管理"}}]}]}),T=o("zL8q"),D=o.n(T),z=(o("tvR6"),o("mtWM")),S=o.n(z);S.a.interceptors.request.use(function(e){return console.log("拦截请求..."),e},function(e){T.Message.error({message:"请求超时！"})}),S.a.interceptors.response.use(function(e){return console.log("拦截响应..."),e});var L=o("mw3O"),V=o.n(L);r.default.config.productionTip=!1,r.default.use(D.a),r.default.prototype.postRequest=function(e,t){return S()({method:"post",url:"/api"+e,data:t,transformRequest:[function(e){var t="";for(var o in e)t+=encodeURIComponent(o)+"="+encodeURIComponent(e[o])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},r.default.prototype.$axios=S.a,r.default.prototype.$qs=V.a,new r.default({el:"#app",router:C,components:{App:i},template:"<App/>"})},OYKP:function(e,t){},Ts0X:function(e,t){},Uj7K:function(e,t){},"l/xz":function(e,t){},tvR6:function(e,t){},"x/CT":function(e,t){},z74V:function(e,t){},zuCT:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f079317aeb47777c9256.js.map